<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<!--jquery-->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<!--bootstrap-->
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">

<!-- Optional theme -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap-theme.min.css">

<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
<!--angular-->
<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.3.7/angular.min.js"></script>
<!--highcharts-->
<script src="http://code.highcharts.com/highcharts.js"></script>
</head>
<body ng-app="myApp">
<!--set domain of scandalous backend-->
<div ng-controller="domainCtrl">
  Domain: <input type="text" ng-model="domain" ng-change="setDomain(domain)"/>
</div>

<div ng-controller="nodeCtrl">
  <button ng-click="domain = getNodes()" ng-model="domain">{{domain}}</button>
</div>

<div class="container">
  <div class="row">
    <div class="col-md-8">
      <div class="row">
        <div class="col-md-12">
          <div class="panel panel-default">
            <div class="panel-heading">
              <h3 class="panel-title">Interactive Graph</h3>
            </div>
            <div class="panel-body">
              <!--graph-->
              graph
            </div>
          </div>
        </div>
      </div>
      
      <div class="row">
        <div class="col-md-12">
          <div class="panel panel-default">
            <div class="panel-heading">
              <h3 class="panel-title">Current Channel Value</h3>
            </div>
            <div class="panel-body">
              <!--value-->
              value
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-md-4">
      <div class="row">
        <div class="col-md-12">
          <div class="panel panel-default">
            <div class="panel-heading">
              <h3 class="panel-title">Available Nodes</h3>
            </div>
            <div class="panel-body">
              <!--nodes-->
              nodes
            </div>
          </div>
        </div>
      </div>
      
      <div class="row">
        <div class="col-md-12">
          <div class="panel panel-default">
            <div class="panel-heading">
              <h3 class="panel-title">Channels</h3>
            </div>
            <div class="panel-body">
              <!--channels-->
              channels
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>

<script>
(function() {
  var app = angular.module("myApp", []);
  
  app.factory("data", function() {
    return {
      domain: "127.1.1.1:8000", //default domain of scandalous backend
      nodes: [], //all available nodes
      channels: [], //all available channels
      currState: {
        node: "", //current node selected
        channel: "", //current channel selected
        value: "", //current value from curr node & channel
      }
    };
  });

  //controller to set/get domain of scandalous backend
  app.controller("domainCtrl", ["$log", "$scope", "data", function($log, $scope, data) {
    $scope.domain = data.domain;

    $scope.setDomain = function(domain) {
      data.domain = domain;
      //$log.log(data.domain);
    };
  }]);

  //controller to retrieve all available nodes
  app.controller("nodeCtrl", ["$log", "$scope", "$http", "data", function($log, $scope, $http, data) {
    $scope.getNodes = function() {
      /*
      $http.get(data.domain + "/packets" + ".html").success(function(response) {
        $scope.nodes = response;
      });*/

      return data.domain + "/packets";
    };
  }]);

})();
</script>
<!--graph
<script>
$(function () { 
    $('#graph').highcharts({
      chart: {
        type: 'line'
      },
      title: {
        text: 'data'
      },
      xAxis: {
        title: {
          text: 'Time'
        }
      },
      yAxis: {
        title: {
          text: 'y axis'
        }
      },
      series: [{
        name: 'John',
        data: [5, 7, 3]
      }]
    });
});
</script>
-->
</body>
</html>
